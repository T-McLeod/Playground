{% extends "base_view.html" %}

{% block page_title %}Teacher View{% endblock %}
{% block title %}ğŸ“ Teacher View{% endblock %}

{% block graph_btn_content %}<span>ğŸ•¸ï¸</span> Graph{% endblock %}
{% block cards_btn_content %}<span>ğŸ“±</span> Cards{% endblock %}

{% block header_extra %}
<a href="/analytics/{{ playground_id }}" class="analytics-toggle-btn" title="View Analytics">
    <span>ğŸ“Š</span> Analytics
</a>
{% endblock %}

{% block role_badge %}Teacher{% endblock %}
{% block view_mode %}teacher{% endblock %}

{% block modal_icon %}
<div class="topic-icon" id="modal-topic-icon">ğŸ“š</div>
{% endblock %}

{% block resources_header %}ğŸ“ Related Resources{% endblock %}

{% block modal_footer %}
<div class="modal-footer">
    <button id="remove-topic-btn" class="btn-danger">
        ğŸ—‘ï¸ Remove Topic
    </button>
</div>
{% endblock %}

{% block extra_modals %}
<!-- Add Topic Modal -->
<div id="add-topic-modal" class="topic-modal hidden">
    <div class="modal-content">
        <button class="modal-close" id="add-topic-close">&times;</button>
        <div class="modal-header">
            <h2 class="modal-title">Add New Topic</h2>
            <div class="topic-icon">â•</div>
        </div>

        <div class="modal-body">
            <label for="new-topic-name">Topic Name: <span style="color: red;">*</span></label>
            <input 
                type="text" 
                id="new-topic-name" 
                placeholder="e.g., Graph Theory, Machine Learning"
                class="modal-input"
                required
            />

            <label for="new-topic-summary">Summary (Optional):</label>
            <textarea 
                id="new-topic-summary" 
                rows="4" 
                placeholder="Provide a custom summary, or leave blank to auto-generate from course materials"
                class="modal-textarea"
            ></textarea>
        </div>

        <div class="modal-footer">
            <button id="add-topic-save-btn" class="btn-primary">
                Save
            </button>
            <button id="add-topic-cancel-btn" class="btn-secondary">
                Cancel
            </button>
        </div>
    </div>
</div>

<!-- Upload Modal -->
{% include 'partials/_upload_modal.html' %}
{% endblock %}

{% block extra_ui %}
<!-- Bottom container for teacher actions -->
<div class="bottom-bar">
    <button id="upload-files-btn" class="upload-files-btn">ğŸ“ Upload Files</button>
    <button id="add-topic-btn" class="add-topic-btn">â• Add New Topic</button>
    <button id="init-course-btn" class="init-course-btn">ğŸ”„ Initialize Course</button>
</div>
{% endblock %}

{% block view_scripts %}
<!-- Dropzone.js CDN -->
<link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='upload.css') }}">
<script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
<script src="{{ url_for('static', filename='js/views/teacher-view.js') }}"></script>
<script src="{{ url_for('static', filename='js/views/upload-manager.js') }}"></script>
{% endblock %}

{% block init_script %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Teacher View initialized for playground:', PLAYGROUND_ID);
        console.log('User:', USER_ID);
        
        const view = new TeacherView(PLAYGROUND_ID, USER_ID);
        view.init();
    });
</script>
{% endblock %}
